- name: Verifications and install requared packages for ansible slave
  block:

    - name: check python version
      assert:
        that: ansible_python_version|version == 2.7
        fail_msg: "{{ message_installer.fails.python_version }}"
        success_msg: "{{ message_installer.info.python_version }}"
      when: ansible_os_family == "RedHat"

    - name: check ansible version
      assert:
        that: hostvars['127.0.0.1'].ansible_version.full is version('{{ ansible_ver }}','>=')
        fail_msg: "{{ message_installer.fails.ansible_version }}"
        success_msg: "{{ message_installer.info.ansible_version }}"

    # - name: Gather packages info
    #   package_facts:
    #     manager: "auto"
    #   no_log: "{{ nolog }}"

    # - name: Check python version
    #   assert:
    #     that: ansible_python_version|version <= 3.6
    #     fail_msg: "Current python version: {{ansible_python_version}}. Needed ansible version: 3.6 or higher"
    #     success_msg: "Version of python interpretator is correct"

  delegate_to: 127.0.0.1
