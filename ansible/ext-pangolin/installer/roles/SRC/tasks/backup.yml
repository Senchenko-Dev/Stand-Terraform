- name: Backup files for src
  block:

    - name: create backup directory
      file:
        path: "{{ backup.src }}"
        state: "{{ item }}"
        owner: postgres
        group: postgres
        mode: 0700
      with_items:
        - "absent"
        - "directory"

    - name: backup files whose use in src process
      copy:
        src: "{{ item }}"
        dest: "{{ backup.src }}/{{ item.split('/')[-1] }}"
        remote_src: true
      with_items:
        - "{{ path_to_manage_backup_sh_file }}"
        - "{{ path_to_pg_se_archlogs_sh_file }}"
        - "{{ path_to_manage_backup_module }}"

  when: SRC and is_src_exists and not is_src_exists_and_not_correct