Версия: 4.6.0

Список изменений:

- Добавлена поддержка ОС ALT Linux SP 8.2;
- Обновлена базовая версия Patroni до версии 2.1.1;
- Обновлена базовая версия PostgreSQL до версии 11.14.

Ограничения:

- Текущая версия дистрибутива поддерживает процедурный язык программирования PL/Python только на базе Python 2.7;
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7/7.8/7.9 и ALT Linux SP 8.2;
- В ОС ALT Linux недоступны расширения postgis, pgrouting и утилиты миграции migration_tools.

Версия: 4.5.0

Список изменений:

- В состав PostgreSQL SE включены все доработки, изменения и исправления оригинального PostgreSQL версии 11.13. Основные изменения системы безопасности:
  - корректировка неправильного планирования повторного выполнения этапа проекции. Планировщик мог построить план, приводящий к сбою сервера, что в свою очередь могло повлечь раскрытие содержимого памяти сервера (CVE-2021-3677);
  - полное отключение повторного согласования SSL. Злонамеренно сконструированный запрос повторного согласования мог вызвать падение сервера (CVE-2021-3449).
- Реализована возможность конфигурирования проверки допустимых LDAP-серверов;
- Реализовано маскирование паролей при создании и изменении ролей в логе БД PostgreSQL SE и в представлении pg_stat_activity;
- Обновлена базовая версия pgaudit до версии 1.3.2;
- Добавлен возможный параметр типа процесса (%b) в log_line_prefix, по аналогии с PostgreSQL 13. Так же расширено определение значений %a, %u, %d, %h для фоновых процессов;
- Утилиты и расширения:
  - обновлен pgBouncer до версии 1.16;
  - реализовано управление планами запросов с помощью расширения pg_hint_plan;
  - добавление функциональной возможности foreign data wrapper для Oracle(добавлено расширение oracle_fdw, доработано для хранения паролей в хранилище pg_auth_config);
  - добавление функциональной возможности foreign data wrapper для MS SQL(добавлено расширение tds_fdw, доработано для хранения паролей в хранилище pg_auth_config);
  - добавлено расширение pg_squeeze, выполняющее реорганизацию таблиц в БД в ручном и автоматизированном режимах (доработано для обеспечения совместимости с TDE, устранена уязвимость раскрытия данных таблиц при включенном TDE).
- Автоматизация сценариев сопровождения:
  - изменение параметров pgBouncer;
  - включение определённых расширений;
  - правка файла аутентификации pg_hba.conf;
  - создание УЗ пользователя БД PostgreSQL SE.
- Изменение в скриптах развертывания:
  - создание кастомного конфигурационного слоя PostgreSQL SE;
  - добавление серверных сетей в pg_hba (решение проблемы с OpenShift - CRPLTFRM-6793);
  - удаление пользователя pgbouncer при включении сквозной аутентификации;
  - включен TLS в настройках LDAP;
  - реализован генератор случайных паролей в виде бинарного ansible модуля;
  - удаление пользователя cron при инсталляции;
  - удаление пользователя replication postgres при инсталляции и обновлении;
  - перевод пользовательских и специальных ТУЗов на scram-sha-256;
  - удалены неиспользуемые сети в pg_hba.

Ограничения:

- Текущая версия дистрибутива поддерживает процедурный язык программирования PL/Python только на базе Python 2.7
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7/7.8/7.9

Версия: 4.4.0

Список изменений:

- Реализована сквозная аутентификация pgBouncer<=>PostgreSQL;
- Обеспечение безопасности хранимых данный и требования ДКБ/УЭК:
  - перевод механизмов защиты от привилегированных пользователей и аудита с использования функций-обработчиков на полную интеграцию с ядром СУБД PostgreSQL SE;
  - реализовано шифрование паролей в конфигурации pg_hba для биндинга с ldap сервером;
  - реализована проверка аргументов командной строки утилиты initprotection;
  - реализован запрет прямого изменения сущностей под защитой через модификацию системных каталогов;
  - реализовано хранение паролей в зашифрованном хранилище для утилит автоматизации (patroni, pg_cron, pg_basebackup, pg_probackup...);
  - реализована проверка зашифрованности сжатых WAL-файлов;
  - включена инициализация TDE в bootstrap и single режимах в зависимости от настроек (KMS, локальных), кроме случая инициализации БД PostgreSQL SE;
  - упакованы в бинарное представление python скрипты утилит patroni и manage_backup;
  - исключено создание пользователей L2 и удаление их при обновлении;
  - реинтеграция с системой мониторинга и работа мониторинга без superuser;
  - исключены специализированные ТУЗ masteromni и pstgcmdb;
  - реализована проверка конфликтов загружаемых и интегрированных расширений;
  - реализовано применениние параметров аудита для групповых ролей;
  - реализованы тесты для парольных политик с альтернативными конфигурациями;
  - исправлена ошибка: формирование имени политики добавляемого администратора безопасности;
  - исправлена ошибка: валидация резервных копий БД после включения TDE;
  - исправлена ошибка: создание резервной копии БД в режиме PAGE после включения TDE;
  - исправлена ошибка: перезачитывание параметров из защищенного хранилища;
  - исправлена ошибка: добавление функций под защиту при наличии защищенных функций с таким же именем;
  - исправлена ошибка: формирования и вывода правил политики;
  - актуализированны маски директорий и файлов PostgreSQL SE.
- Утилиты и расширения:
  - обновлена утилита patroni до версии 2.0.2;
  - в состав дистрибутива включена утилита pgloader используемая для миграции данных из MSSQL в PostgreSQL SE;
  - в состав дистрибутива включено расширение pg_profile для сбора и хранения статистики использования базы данных;
  - в состав дистрибутива включены расширения postgis и pgrouting для работы с геоданными;
  - в состав дистрибутива включено расширение orafce для работы с функциональными "пакетами" Oracle;
  - для расширения dblink добавлены функции подключения к БД при помощи пароля из защищенного хранилища;
  - расширение pg_pathman: предоставлен механизм, разрешающий создание сабсекции пользователем не являющимся owner-ом.
- Автоматизация сценариев сопровождения:
  - минорное обновление PostgreSQL SE;
  - переключения ролей в кластере PostgreSQL SE;
  - разблокировка УЗ и смена пароля УЗ для PostgreSQL SE;
  - стоп/старт PostgreSQL SE.
- Развертывание решения:
  - реализовано создание схемы ext для расширений;
  - реализованы проверки пользователя backup_user при обновлении;
  - реализовано удаление расширения pgaudit из всех БД при обновлении;
  - реализовано динамическое определение ролей кластера (мастер/реплика);
  - реализовано добавление роли as_admin_read в pg_hba;
  - реализованы дополнительные проверки и падение в случае недоступности КМС;
  - доработана настройка rsyslog: все прочитанные сообщения из postgresql.*.log не пишутся в /var/log/messages;
  - изменен метод архивирования логов PostgreSQL SE;
  - добавлена пользовательская схема в search_path для роли as_admins;
  - актуализированы sudoers команды для пользователя postgres;
  - добавлены права DML для роли TUZ_group;
  - актуализация владельцев базы данных и табличного пространства;
  - модификация значений для параметров cron.max_running_jobs и max_worker_processes;
  - актуализированы правила pg_hba для групповой роли all-sa-pam-group;
  - групповые роли в ролевой модели сделаны бесконечными;
  - исправлена ошибка: неправильно настроен alias pgconfig;
  - исправлена ошибка: не добавляется alias members и health при установке и обновлении;
  - исправлена ошибка: неправильно настроены параметры LEADER и REPLICA в скрипте dynmotd.sh.j2;
  - исправлена ошибка: некорректный расчет значения max_client_conn.

Ограничения:

- Текущая версия дистрибутива поддерживает процедурный язык программирования PL/Python только на базе Python 2.7
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7/7.8/7.9

Версия: 4.3.2

Список изменений:

- В состав PostgreSQL SE включены все доработки, изменения и исправления оригинальной версии PostgreSQL версии 11.12. Основные изменения системы безопасности:
  - устранение утечки информации в сообщениях об ошибках при нарушении ограничений (CVE-2021-3393);
  - предотвращение целочисленного переполнения при вычислении индексов в массивах (CVE-2021-32027);
  - исправление некорректной обработки «отбросовых» столбцов в целевых списках INSERT ... ON CONFLICT ... UPDATE (CVE-2021-32028);
  - исправление потенциально некорректного вычисления результатов UPDATE ... RETURNING для межсекционных изменений с соединением (CVE-2021-32029).

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает процедурный язык программирования PL/Python только на базе Python 2.7
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7/7.8/7.9

Версия: 4.3.1

Список изменений:

- Исправлен дефект несовместимости timescaledb и pgaudit;
- Изменение инфраструктуры сборки/компиляции решения (переход на 7.9);
- В части инсталлятора реализованы и исправлены следующие моменты:
  - добавлено значение misc_set для параметра pgaudit.log;
  - исправлены права для учетной записи all-sa-pam19002_ro.

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает процедурный язык программирования PL/Python только на базе Python 2.7
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7/7.8/7.9

Версия: 4.3.0

Список изменений:

- Улучшения и изменения в части защиты от привилегированных пользователей:
  - для администраторов PostgreSQL SE отключена возможность вызова функции управления ключами;
  - для администраторов PostgreSQL SE отключена возможность изменять параметры управления парольными политиками и включать/выключать прозрачное шифрование данных (TDE);
  - добавлена необходимость указывать пространство имен в функций интерфейса администратора безопасности;
  - добавлен вывод ошибки при вызове функций управления при отключенной защите.
- Реализована возможность интеграции с KMS-заменителем в виде файла для задачи пилотирования TDE и защиты от привилегированных пользователей;
- Улучшения и изменения TDE (прозрачно шифрование):
  - оптимизация и повышение производительности за счет переноса сессионного ключа и ключа шифрования WAL из общей памяти в локальную память каждого процесса, а также замены блочного режима шифрования CBC на поточный CTR для шифрования журналируемых отношений и буфера изменений данных в ходе логической репликации;
  - реализована синхронизация ключей шифрования отношений в кластере для обеспечения возможности переноса объектов БД с мастера на реплику на уровне файловой системы (ФС);
  - добавлена возможность переноса отношений между зашифрованными табличными пространствами (ТП), из не зашифрованного ТП в зашифрованное ТП и наоборот с перешифровыванием, зашифровыванием и расшифровыванием файлов данных в ТП соответственно;
  - при создании зашифрованной БД на базе шаблона с отношениями в зашифрованном табличном пространстве приводит к перешифрованию данных отношений в новой БД;
  - добавлен запрет на создание БД из зашифрованного шаблона БД в силу отсутствия в этом потребности, в следствие чего зашифрованная БД не может быть шаблонной;
  - исключено отображение параметров KMS в утилите setup_kms_credentials для устранения утечки параметров соединения;
  - реализовано хранение и использование параметров подключения к нескольким KMS для обеспечения отказоустойчивости при взаимодействии с резервированными KMS;
  - для обеспечения надежности зашифровывания WAL файлов при первом запуске БД с включенным TDE реализовано сохранение зашифрованных данных в новые WAL файлы, которые замещают соответствующие открытые WAL файлы только в случае успешного завершения процедуры зашифровывания всех WAL файлов;
  - добавлена справочная информация в утилиту setup_kms_credentials;
  - заменена регистрация функций по работе с ключевой информацией через расширение на регистрацию в каталоге pg_proc на этапе инициализации БД. Переопределение этих функций запрещено;
  - добавлены плагины шифрования c алгоритмом шифрования AES и размерами ключей 128/192 бит;
  - добавлена возможность запуска postgres в однопользовательском режиме (single mode) с включенным TDE;
  - внесены изменения в утилиту pg_probackup для работы с кластером БД с включенным TDE;
  - файл с параметрами подключения к KMS enc_connection_settings.cfg перенесен из PGDATA в /etc/postgres, т.к. он не относится к настройкам БД;
  - параметр 'pg_cluster_id' перенесен из postgresql.conf в /etc/postgres/enc_connection_settings.cfg для предоставления возможности его чтения утилитам.
- Создание инструмента для обновления PostgreSQL SE и интеграция с RLM:
  - реализован механизм обновления с версии PostgreSQL SE 4.1.0, 4.2.0, 4.2.1, 4.2.2, 4.2.3, 4.2.5, 4.2.6, 4.2.8 на версию PostgreSQL SE 4.3.0;
  - реализовано включение SSL на уровне репликации для версий, в которых SSL не был установлен (версии PostgreSQL SE 4.1.0 и 4.2.0);
  - создан скрипт "разведки" для RLM, позволяющий провести проверку, настройку SSL при необходимости и выдать рекомендации перед запуском обновления;
  - реализован процесс слияния старых и новых конфигурационных файлов (postgres.yml, postgresql.conf и pg_hba.conf) при обновлении PostgreSQL SE;
  - реализован перенос установленных ранее расширений, не входящих в официальный дистрибутив, в новую версию PostgreSQL SE;
  - реализован механизм обновления расширений, входящих в поставку PostgreSQL SE.
- Развитие инсталлятора и DevOps:
  - реализована проверка и включение yum репозитория EPEL7 для упрощения первичной настройки серверов;
  - добавлено расширение pg_repack/pgcompacttable в автоинсталлятор для обеспечения возможности реорганизации таблиц без блокировки;
  - добавлено расширения TimescaleDB в состав PostgreSQL SE для оптимизированного хранения данных временных рядов;
  - включение rsyslog для автоматической отправки логов pg_audit в оперативный центр безопасности (Security Operations Center (SOC));
  - реализована интеграция с системой управления привилегированным доступом (РАМ);
  - реализована функция определения имени хоста для периодического использования в разных утилитах и компонентах;
  - добавлен параметра server_se_version_num сообщающий цифровое представление версии продукта;
  - реализовано включение расширения pg_stat_statements предоставляющего доступ к расширенной статистике;
  - снижен уровень логирования, установленный по умолчанию, для PostgreSQL SE.
- Обновление/добавление утилит и расширений:
  - в состав PostgreSQL SE включены все доработки, изменения и исправления оригинальной версии PostgreSQL SE версии 11.10;
  - обновлен pgBouncer до версии 1.14;
  - добавлены расширения pg_repack, btree-gist, btree-gin, uuid-oss в дистрибутив PostgreSQL SE.
- Соответствие 4 уровню доверия по ФСТЭК:
  - сформировано описание ролевой модели PostgreSQL SE для ФСТЭК;
  - исправлены ошибки и предупреждения (errors и warnings) по результатам статического анализатора кода cppcheck;
  - организовано фаззинг тестирование (pg_fuzzer + sqlsmith);
  - добавлено дефолтное значение для параметра pgaudit.log;
  - pgaudit интегрирован в ядро PostgreSQL SE;
  - добавлено в лог аудита логирование попыток выполнения запросов завершившихся отказом из-за недостаточности привилегий согласно ролевой модели или механизму защиты данных;
  - добавлено в лог аудита логирование успешных и неуспешных(неверный пароль) попыток авторизации;
  - добавлено в лог аудита логирование прекращения сеансов (клиентских соединений);
  - добавлено в лог аудита логирование изменения настроек механизма защиты данных от привилегированных пользователей;
  - реализована возможность отключение idle клиентских соединений.
- Расширенный мониторинг, интегрированный с/дублирующий корпоративной системой мониторинга:
  - мониторинг фоновых процессов PosgreSQL SE (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=4080799463);
  - мониторинг статуса репликации (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=3914896536).
- Развитие решения по парольным политикам:
  - реализован параметра разрешающий/запрещающий задание пароля в виде хэша md.
- Подготовлена статья: Liquibase (https://sbtatlas.sigma.sbrf.ru/wiki/display/PGSQL/Liquibase);
- Подготовлена статья: Мониторинг с помощью Grafana (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=3954446247);
- Подготовлена статья: Репликация в PostgreSQL (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=4105341244);
- Подготовлена статья: Как работает ролевая модель PostgreSQL SE в Сбере. (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=4059960788);
- Подготовлена статья: Инструменты/расширения поддерживаемые PostgreSQL SE (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1214912031).

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает процедурный язык программирования PL/Python только на базе Python 2.7
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7/7.8

Версия: 4.2.8

Список изменений:

- Выделение библиотек с вирусной лицензией из состава дистрибутива;
- Обновлена документация расширения TimescaleDB для PostgreSQL SE;
- В части инсталлятора реализованы и исправлены следующие моменты:
  - исправлена ошибка: неправильно настроен alias pglog и errors;
  - обновление пароля для Zabbix_oasubd;
  - обновление пароля для УЗ БД postgres;
  - исправлена ошибка: не работает авторизация через LDAP при наличии в AD контакта с тем же именем, что и логин.

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7/7.8
- Запрещено задание/изменение пароля для пользователя БД в виде md5 хэша

Версия: 4.2.6

Список изменений:

- Исправлена ошибка deadlock при создании пользователя;
- В части инсталлятора реализованы и исправлены следующие моменты:
  - модификация даты VALID UNTIL для всех ролей;
  - организована передача параметра net_segment в jenkins job ДИ постановки на СРК;
  - исправлена ошибка в прописывании пути к табличному пространству в спецификации СРК.

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено задание/изменение пароля для пользователя БД в виде md5 хэша

Версия: 4.2.5

Список изменений:

- Реализована возможность через psql получить данные о заблокированных пользователях;
- Исправлена ошибка неправильной обработки failcounter при локальном входе;
- Добавлено представление backup.history с историей резервных копий;
- В состав дистрибутива включено расширение TimescaleDB для PostgreSQL SE;
- В части инсталлятора реализованы и исправлены следующие моменты:
  - функциия для аутентификации через pgbouncer перемещена в шаблон template1;
  - ограничен доступ в схему public для различных БД;
  - реализована конфигурация развертывания PostgreSQL SE only + pgBouncer;
  - доработана интеграция с СРК для схемы standalone;
  - директория /pgbackup заменена на /pgarclogs;
  - реализована генерация спецификаций для постановки на СРК в случае установки продукта на готовые сервера;
  - добавлен пароль для linux пользователя postgres в зависимости от типа среды, куда производится установка;
  - доработан механизм постановки на мониторинг Zabbix;
  - ослаблена проверка свободного места на диске в ПРОМ;
  - изменена строка коннекта в ДИ;
  - новое размещение табличных пространств;
  - добавлено выставление приоритета запуска сервиса Etcd + для ДЕВ/ИФТ/ПСИ сред установлен Patroni параметр retry_timeout равный 60 и ttl 130;
  - в конфигурации patroni прописываются все 3 хоста etcd.

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено задание/изменение пароля для пользователя БД в виде md5 хэша

Версия: 4.2.4

Список изменений:

- В состав дистрибутива включен инструмент ora2pg для миграции данных из Oracle в PostgreSQL SE
- В состав дистрибутива включен прототип инструмента db-data-comparator для сверки схем баз данных

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено задание/изменение пароля для пользователя БД в виде md5 хэша

Версия: 4.2.3

Список изменений:

- В части инсталлятора реализованы и исправлены следующие моменты:
  - исправлен баг с постановкой на мониторинг Zabbix;
  - исправлен баг в ролевой модели (права as_admin на создание схемы БД);
  - создан механизм очистки логов postgresql;
  - переработана роль finally, которая завершает установку продукта;
  - изменен уровень логирования postgresql;
  - реализован скрипт динамического окна приветствия КТС.

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено задание/изменение пароля для пользователя БД в виде md5 хэша

Версия: 4.2.2

Список изменений:

- Исправление ошибки при попытке авторизоваться в случае если один из элементов кластера не доступен (в синхронном режиме);
- Исправлена ошибка при смены пароля с помощью команды psql \password;
- Исправлен скрипт очистки архивных WAL (pg_se_archlogs.sh). Удаляются только архивы, которые были скопированы в СРК;
- Отключение парольных политик для всех внешних аутентификаций;
- В части инсталлятора реализованы и исправлены следующие моменты:
  - переименованы имена для тестовых технологических учетных записей;
  - исправление ошибок и модификация ролевой модели;
  - добавлена возможность входа пользователя postgres в пользовательские базы данных;
  - реализована проверка входных параметров от портала динамической инфраструктуры;
  - добавлена возможность создания объектов базы данных в uppercase;
  - исправлена ошибка с использованием linux alias psql;
  - исправлена ошибка с ротацией логов в pgbouncer;
  - добавлен restart сервиса pgbouncer при падении pgbouncer;
  - исправлена ошибка подключения к pgbouncer;
  - в конфигурации pgbouncer введены минимальные настройки подключений.
- Patroni:
  - исправлена инициализация параметра max_worker_processes.

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено задание/изменение пароля для пользователя БД в виде md5 хэша

Версия: 4.2.1

Список изменений:

- В части инсталлятора реализованы и исправлены следующие моменты:
  - аутентификация между patroni и PostgreSQL настроена с использованием сертификатов;
  - отключено не авторизованное управление через patronictl;
  - отключено не авторизованное изменение конфигурации черех curl;
  - транспортный пароль postgres в БД заменен на постоянный пароль СберИнфра;
  - парольные политики для ТУЗов выставлены в соответствии с ВНД.
- Модифицирован вывод номера версии PostgreSQL Sber Edition с помошью запроса select version();

Ограничения:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено задание/изменение пароля для пользователя БД в виде md5 хэша

Версия: 4.2.0

Список изменений:

- PostgreSQL SE и ДИ доработаны для возможности открыть доступ к продукту для сред ПСИ/ПРОМ в кластерной конфигурации;
- Реализовано прямое резервное копирование (в части интеграции с СРК Data Protector);
- В состав дистрибутива включены следующие расширения: pg_cron, pg_pathman;
- Версия patroni обновлена до 1.6.5;
- В части инсталлятора реализованы и исправлены следующие моменты:
  - изменено окно приветствие на КТС с PostgreSQL SE;
  - кластер высокой доступности развертывается с включенной и настроенной ротацией логов;
  - в pgBouncer настроен механизм pass-through для получения пароля с PostgreSQL;
  - исправлен расчет параметров PostgreSQL на основе характеристик КТС;
  - добавлено создание схемы в пользовательской БД и выдача необходимых для работы ТУЗов привилегий;
  - донастроены парольные политики согласно требованиям кибербезопасности;
  - успешно пройдена интеграция с СРК;
  - скорректированы схемы развертывания кластера высокой доступности;
  - добавлен пароль для linux пользователя postgres;
  - добавлены автоматизированные тесты проверяющие правильность установки.
- Значительно расширено покрытия автоматизированными тестами реализованной ранее функциональности.

Ограничение:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено создание/изменение паролей в виде md5 хэшей

Версия: 4.1.0

Список изменений:

- Реализовано прозрачное шифрование данных Transparent Data Encryption (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1283300385)
- Реализована защита данных от привилегированных пользователей (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1348013727)
- Обновлено ядро PostgreSQL до версии 11.7 (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=2055474671)
- Реализована интеграция с системой мониторинга (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1884127442)
- Реализована интеграция с системой резервного копирования (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1898288754)
- Модифицирован вывод номера версии PostgreSQL Sber Edition (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=2055476265)
- Расширение по управлению парольными политиками включено в ядро PostgreSQL Sber Edition
- Обновлён инсталлятор в дистрибутиве PostgreSQL Sber Edition

Ограничение:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено создание/изменение паролей в виде md5 хэшей
- Текущая версия интеграции с системой резервного копирования не поддерживает прямое копирование на сервера СРК, копирование происходит посредством локальной директории

Версия: 3.3.0

Список изменений:

- Реализация расширения по управлению парольной политики (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1298208140)
- Обновлён инсталлятор в дистрибутиве PostgreSQL Sber Edition (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1576411763)
- В дистрибутиве PostgreSQL Sber Edition обновлена версия утилиты patroni до 1.6.4

Ограничение:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию с использованием расширения password_policy
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP
- Текущая версия дистрибутива поддерживает работу в ОС Linux RHEL 7.7
- Запрещено создание/изменение паролей в виде md5 хэшей

Версия: 3.2.0

Список изменений:

- Включен инсталлятор в дистрибутив PostgreSQL Sber Edition (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1576411763)
- Добавлена в дистрибутив PostgreSQL Sber Edition утилита confd (0.16.0)
- Добавлена в дистрибутив PostgreSQL Sber Edition утилита patroni (1.6.1)

Ограничение:

- В текущей версии pgbouncer не поддерживает внешнюю аутентификацию! Поэтому необходимо следовать следующим правилам:
  - ТУЗ приложений должны подключаться через pgbouncer и проходить локальную аутентификацию
  - Администраторы БД должны подключаться напрямую и проходить внешнюю аутентификацию LDAP

Версия: 3.1.0

Список изменений:

- Увеличена длина имен для объектов PostgreSQL до 128 символов (https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=1517421887)
- Добавлена в дистрибутив PostgreSQL Sber Edition расширение pgaudit (1.3)
- Добавлена в дистрибутив PostgreSQL Sber Edition утилита pgbouncer (1.11.0)
